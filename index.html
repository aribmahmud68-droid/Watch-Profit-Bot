<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WatchProfitBot ‚Äî Monetag Income App</title>

  <!-- Telegram WebApp JS -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- ‚úÖ Monetag SDK Script (your real zone) -->
  <script src="//libtl.com/sdk.js" data-zone="10151449" data-sdk="show_10151449"></script>

  <style>
    :root { font-family: system-ui, -apple-system, 'Noto Sans Bengali', sans-serif; }
    body { margin:0; background:#f6f8fa; color:#111; display:flex; align-items:center; justify-content:center; height:100vh; }
    .app { width:100%; max-width:420px; background:white; border-radius:12px; box-shadow:0 6px 24px rgba(15,23,42,.08); padding:18px; }
    header { display:flex; gap:12px; align-items:center; }
    .logo { width:56px; height:56px; background:linear-gradient(135deg,#7c3aed,#06b6d4); border-radius:12px; color:white; display:flex; align-items:center; justify-content:center; font-weight:700; }
    h1 { font-size:18px; margin:0; }
    p.small { margin:6px 0 12px; font-size:13px; color:#475569; }
    .balance { display:flex; justify-content:space-between; align-items:center; padding:12px; border-radius:10px; background:#f1f5f9; }
    .btn { display:block; margin-top:14px; padding:12px; border-radius:10px; text-align:center; font-weight:600; cursor:pointer; border:0; }
    .primary { background:#0ea5a4; color:white; }
    .muted { background:#e2e8f0; color:#0f172a; }
    .tiny { font-size:12px; color:#64748b; }
    .ad-area { margin-top:14px; min-height:120px; border:1px dashed #e2e8f0; border-radius:8px; display:flex; align-items:center; justify-content:center; }
    footer { margin-top:12px; text-align:center; color:#94a3b8; font-size:12px; }
  </style>
</head>

<body>
  <div class="app" role="application" aria-label="Monetag Watch-to-Earn Telegram Mini App">
    <header>
      <div class="logo">WP</div>
      <div>
        <h1>Watch Profit Bot</h1>
        <p class="small">‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶≤‡ßá ‡¶∞‡¶ø‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶™‡¶æ‡¶¨‡ßá‡¶®‡•§ Telegram ‡¶¨‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏‡ßá ‡¶ï‡ßç‡¶∞‡ßá‡¶°‡¶ø‡¶ü ‡¶π‡¶¨‡ßá‡•§</p>
      </div>
    </header>

    <div class="balance" id="balanceBox">
      <div>
        <div class="tiny">User</div>
        <div id="userName">‡¶Ö‡¶®‡¶æ‡¶Æ‡¶ø</div>
      </div>
      <div style="text-align:right">
        <div class="tiny">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</div>
        <div id="balance">‡ß≥0.00</div>
      </div>
    </div>

    <p class="tiny" style="margin-top:12px">‚ÄúWatch Ad‚Äù ‡¶ö‡¶æ‡¶™‡¶≤‡ßá Monetag ‡¶è‡¶° ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶π‡¶¨‡ßá‡•§ ‡¶∂‡ßá‡¶∑ ‡¶π‡¶≤‡ßá ‡¶¨‡¶ü‡¶ï‡ßá reward ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá‡•§</p>

    <div class="ad-area" id="adArea">‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá</div>

    <button class="btn primary" id="watchBtn">‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® (Watch Ad)</button>

    <footer>
      <div>‡¶¨‡¶ü ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï: <span id="botUsername">@WatchProfitBot</span></div>
    </footer>
  </div>

  <script>
    // Telegram WebApp initialization
    const tg = window.Telegram.WebApp;
    tg.expand();

    const initDataUnsafe = tg.initDataUnsafe || {};
    const user = initDataUnsafe.user || {};
    document.getElementById('userName').textContent =
      (user.first_name || '‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ') + (user.username ? ' (@' + user.username + ')' : '');

    let balance = 0.00;
    const balanceEl = document.getElementById('balance');
    const watchBtn = document.getElementById('watchBtn');
    const adArea = document.getElementById('adArea');

    function updateBalanceUI() {
      balanceEl.textContent = '‡ß≥' + balance.toFixed(2);
    }

    updateBalanceUI();

    // ‚úÖ Monetag Rewarded Interstitial Integration
    watchBtn.addEventListener('click', async () => {
      watchBtn.disabled = true;
      watchBtn.textContent = '‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
      adArea.innerHTML = '<div class="tiny">‡¶è‡¶° ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>';

      try {
        // Call Monetag ad
        await show_10151449(); // This function comes from Monetag SDK

        // Ad finished successfully
        const earned = 0.10; // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ reward (‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶á‡¶ö‡ßç‡¶õ‡ßá‡¶Æ‡¶§‡ßã ‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡ßã)
        balance += earned;
        updateBalanceUI();

        // Telegram bot ‡¶ï‡ßá reward ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
        tg.sendData(JSON.stringify({
          event: 'ad_reward_claim',
          amount: earned,
          timestamp: Date.now()
        }));

        adArea.innerHTML = '<div class="tiny">üéâ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®! ‡ß≥' + earned.toFixed(2) + ' ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§</div>';
      } catch (e) {
        console.error(e);
        adArea.innerHTML = '<div class="tiny">‚ùå ‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶¨‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</div>';
      } finally {
        watchBtn.disabled = false;
        watchBtn.textContent = '‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® (Watch Ad)';
      }
    });
  </script>
</body>
</html>